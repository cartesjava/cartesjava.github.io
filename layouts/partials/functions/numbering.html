{{- define "numbering" -}}{{ $numberOnly := .NumberOnly }}{{ $currentPage := .Page }}{{ $site := .Page.Site }}{{ $bookSection := default "docs" $site.Params.BookSection  }}{{ if eq $bookSection "*" }}{{ $bookSection = "/" }}{{/* Backward compatibility */}}{{ end }}{{ $rootPage := $site.GetPage $bookSection }}{{ range $index, $page := where (where $rootPage.Pages "Params.BookHidden" "ne" true) "Params.BookNumbered" "ne" false }}{{ if eq $page $currentPage }}{{ $index = add $index 1 }}{{ if $numberOnly }}{{ printf "%d. " $index }}{{ else }}{{ printf "Chapitre %d. " $index }}{{ end }}{{end }}{{end }}{{- end -}}