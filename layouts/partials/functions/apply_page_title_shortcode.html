{{- define "apply_page_title_shortcode" -}}{{ $params := newScratch }}{{ $name := .Get "name" }}{{ $args := .Get "args" }}{{ $context := .Get "context" }}{{ $titleLevel := $args.Get "title-level" }}{{ if not $titleLevel }}{{ $titleLevel := $context.Get "title-level" }}{{ end }}{{ if not $titleLevel }}{{ $titleLevel = 1 }}{{ end }}{{ $title := $args.Get "title" }}{{ if not $title }}{{ $title := $context.Get "title" }}{{ end }}{{ if not $title }}{{ $title = $context.Page.Title }}{{ end }}{{ if not $title }}{{ $title = "<strong>[WARNING: title not found]</strong>" }}{{ end }}{{ $params.Set "title-level" $titleLevel }}{{ $params.Set "title" $title }}{{ template "title" $params }}{{- end -}}