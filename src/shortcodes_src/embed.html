{{ $params := newScratch }}

{{ $src := .Get 0 }}
{{ if not $src }}
    {{ $src = .Get "src" }}
{{ end }}
{{ $params.Set "src" $src }}

{{ $params.Set "indent" (.Get "indent") }}

{{ $params.Set "first_line" (.Get "first-line") }}

{{ $params.Set "last_line" (.Get "last-line") }}

{{ $params.Set "base_path" ($.Page.File.Dir) }}

{{ $params.Set "extraDir" .Page.Site.Params.extraDir }}
{{ $params.Set "extras" .Page.Site.Params.extras  }}

{{ template "embed" $params }}
